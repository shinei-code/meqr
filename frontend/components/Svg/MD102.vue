<template>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2480" height="3507" viewBox="0 0 2480 3507">
  <defs>
    <clipPath id="clip-MD_102">
      <rect width="2480" height="3507"/>
    </clipPath>
  </defs>
  <g id="MD_102" class="cls-1">
    <rect class="cls-15" width="2480" height="3507"/>
    <g id="長方形_2" data-name="長方形 2" class="cls-2" transform="translate(295 1802)">
      <rect class="cls-13" width="1939" height="490"/>
      <rect class="cls-14" x="2" y="2" width="1935" height="486"/>
    </g>
    <g id="長方形_1" data-name="長方形 1" class="cls-2" transform="translate(1323 484)">
      <rect class="cls-13" width="916" height="147"/>
      <rect class="cls-14" x="2" y="2" width="912" height="143"/>
    </g>
    <text id="様式第25号_第20条関係_" data-name="様式第25号（第20条関係）" class="cls-3" transform="translate(195 282)"><tspan x="0" y="0">様式第25号（第20条関係）</tspan></text>
    <text id="_市町村名" data-name="＊市町村名" class="cls-3" transform="translate(1337 543)"><tspan x="0" y="0">＊市町村名</tspan></text>
    <text id="_受理年月日" data-name="＊受理年月日" class="cls-3" transform="translate(1337 611)"><tspan x="0" y="0">＊受理年月日</tspan></text>
    <text id="xx市" class="cls-4" transform="translate(1845 548)"><tspan x="0" y="0">xx市</tspan></text>
    <text id="障害者手帳記載事項変更届_再交付申請書" data-name="障害者手帳記載事項変更届・再交付申請書" class="cls-5" transform="translate(739 832)"><tspan x="0" y="0">障害者手帳記載事項変更届・再交付申請書</tspan></text>
    <line id="線_1" data-name="線 1" class="cls-6" x2="916" transform="translate(1323.5 557.5)"/>
    <text id="xx県知事_殿" data-name="xx県知事　　殿" class="cls-3" transform="translate(294 1078)"><tspan x="0" y="0">xx県知事　　殿</tspan></text>
    <text id="_私は_精神保健及び精神障害者福祉に関する法律第45条の規定に基づく精神障害者保健福祉手帳_について_次の事項_印_の届出_申請をします_" data-name="　私は、精神保健及び精神障害者福祉に関する法律第45条の規定に基づく精神障害者保健福祉手帳
について、次の事項（○印）の届出・申請をします。" class="cls-3" transform="translate(245 1378)"><tspan x="0" y="0">　私は、精神保健及び精神障害者福祉に関する法律第45条の規定に基づく精神障害者保健福祉手帳</tspan><tspan x="0" y="80">について、次の事項（○印）の届出・申請をします。</tspan></text>
    <text id="_1_都道府県内における住所変更_都道府県を越える住所変更_氏名の変更_の届出" data-name="1　 [①都道府県内における住所変更、②都道府県を越える住所変更、③氏名の変更]の届出" class="cls-7" transform="translate(258 1620)"><tspan x="0" y="0">　　 [①都道府県内における住所変更、②都道府県を越える住所変更、③氏名の変更]の届出</tspan></text>
    <text id="_変更内容_" data-name="(変更内容)" class="cls-3" transform="translate(323 1782)"><tspan x="0" y="0">(変更内容)</tspan></text>
    <text id="旧" class="cls-3" transform="translate(359 1944)"><tspan x="0" y="0">旧</tspan></text>
    <text id="新" class="cls-3" transform="translate(359 2192)"><tspan x="0" y="0">新</tspan></text>
    <text id="_2_汚れ_破り_紛失_したための再交付の申請" data-name="2　　[　①　汚れ　②　破り　③　紛失　]したための再交付の申請" class="cls-8" transform="translate(258 2440)"><tspan x="0" y="0">2　　[　①　汚れ　②　破り　③　紛失　]したための再交付の申請</tspan></text>
    <g class="cls-8" transform="translate(584 2423)" v-if="md102.saikouhu_riyu==1"><circle r="55" fill="none" stroke="#0000000" stroke-width="6" /></g>
    <g class="cls-8" transform="translate(823 2423)" v-if="md102.saikouhu_riyu==2"><circle r="55" fill="none" stroke="#0000000" stroke-width="6" /></g>
    <g class="cls-8" transform="translate(1065 2423)" v-if="md102.saikouhu_riyu==3"><circle r="55" fill="none" stroke="#0000000" stroke-width="6" /></g>
    <text id="申請者" class="cls-3" transform="translate(901 2617)"><tspan x="0" y="0">申請者</tspan></text>
    <text id="氏_名" data-name="氏　　名" class="cls-3" transform="translate(1107 2602)"><tspan x="0" y="0">氏　　名</tspan></text>
    <text id="住_所" data-name="住　　所" class="cls-3" transform="translate(1107 2685)"><tspan x="0" y="0">住　　所</tspan></text>
    <text id="個人番号" class="cls-3" transform="translate(1107 2851)"><tspan x="0" y="0">個人番号</tspan></text>
    <text id="現行の手帳番号" class="cls-3" transform="translate(1107 2934)"><tspan x="0" y="0">現行の手帳番号</tspan></text>
    <text id="_注_都道府県の区域を超える住所変更をしたときは_本届書のほかに障害者手帳申請書を提出_してください_" data-name="(注)　都道府県の区域を超える住所変更をしたときは、本届書のほかに障害者手帳申請書を提出
　　してください。" class="cls-9" transform="translate(275 3033)"><tspan x="0" y="0">(注)　都道府県の区域を超える住所変更をしたときは、本届書のほかに障害者手帳申請書を提出</tspan><tspan x="0" y="80">　　してください。</tspan></text>
    <line id="線_2" data-name="線 2" class="cls-6" x2="1941" transform="translate(295.5 2047.5)"/>
    <line id="線_3" data-name="線 3" class="cls-6" y1="490" transform="translate(473.5 1802.5)"/>
    <text id="_document_id" data-name="$document_id" class="cls-3" transform="translate(1945 3430)"><tspan x="0" y="0">MD_102</tspan></text>
    <text id="_uketuke_dt_" data-name="$uketuke_dt             " class="cls-3" transform="translate(1680 572)"><tspan x="0" y="39" xml:space="preserve">令和　　年　　月　　日</tspan></text>
    <text id="_uketuke_dt_2" data-name="$uketuke_dt             " class="cls-3" transform="translate(1600 1136)"><tspan x="0" y="39" xml:space="preserve">令和　　年　　月　　日</tspan></text>
    <text id="_ido_kengai" data-name="$ido_kengai" class="cls-10" transform="translate(400 1544.5)"><tspan x="31" y="86">{{this.md102.is_sstc_todoke1==1 ? '〇' : ''}}</tspan></text>
    <text id="_ido_kennai" data-name="$ido_kennai" class="cls-10" transform="translate(1038 1544.5)"><tspan x="31" y="86">{{this.md102.is_sstc_todoke2==1 ? '〇' : ''}}</tspan></text>
    <text id="_ido_name" data-name="$ido_name" class="cls-10" transform="translate(1613 1544.5)"><tspan x="81" y="86">{{this.md102.is_sstc_todoke3==1 ? '〇' : ''}}</tspan></text>

    <g v-if="this.md102.is_sstc_todoke1 || this.md102.is_sstc_todoke2">
      <text 
        id="_old_address" 
        data-name="$old_address" 
        class="cls-3" 
        transform="translate(510 1860)"
      >
        <tspan x="0" y="39" v-bind="wAdjust.oldAddr">{{ md102.old_address ? md102.old_address + '　' + md102.old_address_bldg : ''}}</tspan>
      </text>
      <text 
        id="_new_address" 
        data-name="$new_address" 
        class="cls-3" 
        transform="translate(510 2108)"
      >
        <tspan x="0" y="39" v-bind="wAdjust.newAddr">{{ $getPtAddr() }}</tspan>
        </text>
    </g>

    <g v-if="this.md102.is_sstc_todoke3">
      <text id="_old_name" data-name="$old_name" class="cls-3" transform="translate(510 1950)"><tspan x="0" y="39">{{ md102.old_name_sei ? md102.old_name_sei + '　' + md102.old_name_mei : ''}}</tspan></text>
      <text id="_new_name" data-name="$new_name" class="cls-3" transform="translate(510 2198)"><tspan x="0" y="39">{{ $getPtName() }}</tspan></text>
    </g>

    <text 
      id="_new_address-2" 
      data-name="$new_address" 
      class="cls-3" 
      transform="translate(1447 2646)"
    >
      <tspan x="0" y="39" v-bind="wAdjust.ptAddr">{{ this.patient.ptAddr }}</tspan>
    </text>

    <text 
      id="_new_address_building" 
      data-name="$new_address_building" 
      class="cls-3" 
      transform="translate(1447 2729)"
    >
      <tspan x="0" y="39" v-bind="wAdjust.ptAddrBldg">{{ this.patient.ptAddrBldg }}</tspan>
    </text>
    
    <text id="_d_sstc_no" data-name="$d_sstc_no" class="cls-3" transform="translate(1447 2895)"><tspan x="0" y="39">{{ this.patient.techoNo }}</tspan></text>
    <!-- <g id="長方形_3" data-name="長方形 3" class="cls-11" transform="translate(1940 146)">
      <rect class="cls-13" width="300" height="300"/>
      <rect class="cls-14" x="0.5" y="0.5" width="299" height="299"/>
    </g>
    <text id="QR" class="cls-12" transform="translate(2090 326)"><tspan x="-84.624" y="0">QR</tspan></text> -->
    <g transform="translate(1950 40)" v-html="qrcode"></g>
  </g>
</svg>

</template>

<script>
export default {
  data() {
    return {
      patient: {},
      md102: {},
      qrcode: null,

      // 幅調整
      wAdjust: {
        oldAddr: null,
        newAddr: null,
        ptAddr: null,
        ptAddrBldg: null,
      }
    }
  },
  mounted() {
    this.md102 = this.$store.getters.getMd102;  // sessionStorage取得
    this.patient = this.$store.getters.getPatient;  // sessionStorage取得

    // QRコード生成 >>>
    let qrValue = ['3'];  // 共通部分
    if (this.md102.is_sstc_todoke1 == 1) {  // 県内転入の場合
      qrValue = qrValue.concat([
        "322",
        "7",
        this.md102.is_sstc_todoke3 == 1 ? 1 : 0,  
        "99",
        this.patient.ptAddr,
        this.patient.ptAddrBldg,
      ])
    } else {  // 県内転入以外の場合
      qrValue = qrValue.concat([
        "32",
        "5",
        this.md102.is_saikouhu_shinsei ? 1 : 0,
        this.md102.is_techou_face_pic,
        this.md102.is_sstc_todoke3 == 1 ? 1 : 0,  
        this.md102.is_sstc_todoke2 == 1 ? "99" : "1",
        this.md102.is_sstc_todoke2 == 1 ? this.patient.ptAddr : "",
        this.md102.is_sstc_todoke2 == 1 ? this.patient.ptAddrBldg : "",
      ])
    }
    qrValue = qrValue.concat([  // 共通部分
      this.$getPtTel(),
      this.$getHgKana(),
      this.$getHgName(),
      this.patient.hgAddr,
      this.patient.hgAddrBldg,
      this.patient.hgTuzukigara,
      this.md102.section_key,
      this.$getQrSofusaki(this.md102, 'kbn'),
      this.$getQrSofusaki(this.md102, 'sofusaki'),
      this.$getQrVisitor('visitor'),
    ])

    this.qrcode = this.$svgQRCode(qrValue, 400)
    // <<< QRコード生成

    // 幅調整
    if (this.md102.is_sstc_todoke1 || this.md102.is_sstc_todoke2) {
      this.wAdjust.oldAddr = this.$wAdjustAttr(this.md102.old_address ? this.md102.old_address + '　' + this.md102.old_address_bldg : '', 1650);
      this.wAdjust.newAddr = this.$wAdjustAttr(this.$getPtAddr(), 1650);
    }
    this.wAdjust.ptAddr = this.$wAdjustAttr(this.patient.ptAddr, 850);
    this.wAdjust.ptAddrBldg = this.$wAdjustAttr(this.patient.ptAddrBldg, 850);
  },
}
</script>

<style scoped>
  .cls-1 {
    clip-path: url(#clip-MD_102);
  }

  .cls-15, .cls-2 {
    fill: #fff;
  }

  .cls-10, .cls-11, .cls-12, .cls-2, .cls-3, .cls-4, .cls-5, .cls-6, .cls-7, .cls-8, .cls-9, .cls-14 {
    stroke: #000;
  }

  .cls-2, .cls-6 {
    stroke-width: 4px;
  }

  .cls-3, .cls-7, .cls-8, .cls-9 {
    font-size: 45px;
  }

  /* .cls-10, .cls-3, .cls-4, .cls-5, .cls-7, .cls-8, .cls-9 {
    font-family: MS-Mincho, MS Mincho;
  } */

  .cls-4 {
    font-size: 60px;
  }

  .cls-5 {
    font-size: 50px;
  }

  .cls-11, .cls-14, .cls-6 {
    fill: none;
  }

  .cls-7 {
    letter-spacing: 0.045em;
  }

  .cls-8 {
    letter-spacing: 0.06em;
  }

  .cls-9 {
    letter-spacing: 0.015em;
  }

  .cls-10 {
    font-size: 100px;
  }

  .cls-12 {
    font-size: 97px;
    /* font-family: Meiryo; */
    letter-spacing: 0.3em;
  }

  .cls-13 {
    stroke: none;
  }
</style>